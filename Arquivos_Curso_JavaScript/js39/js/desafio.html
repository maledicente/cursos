<!doctype html>
<html lang="pt-br">
	<head>
		<title>CFB Cursos - Javascript</title>
		<meta charset="utf-8"/>
		<style>
			#jogador{
				position: absolute;;
				top:0px;
				left: 0px;
				background-color: #00f;
				width:50px;
				height: 50px;
			}
		</style>
		<script>

			var jog;
			var vel;
			var dx;
			var dy;
			var px;
			var py;
			var frames;
			var estado;

			function inicia(){
				vel=5;
				dx=1;
				dy=0;
				px=0;
				py=0;
				estado=1;
				jog=document.getElementById("jogador");
				jog.addEventListener("click",movePara);
				document.getElementById("btIni").addEventListener("click",move);
				document.getElementById("btPara").addEventListener("click",para);
				game();
			}

			function movePara(){
				if(estado){
					estado=0;
					jog.style.backgroundColor="#f00";
					cancelAnimationFrame(frames);
				}else{
					estado=1;
					jog.style.backgroundColor="#00f";
					frames=requestAnimationFrame(game);
				}
			}

			function move(){
				if(!estado){
					estado=1;
					jog.style.backgroundColor="#00f";
					frames=requestAnimationFrame(game);
				}
			}

			function para(){
				estado=0;
				jog.style.backgroundColor="#f00";
				cancelAnimationFrame(frames);
			}


			function game(){
				//controle movimento
				px+=dx*vel*estado;
				py+=dy*vel*estado;
				if((px >= 500)||(px <= 0)){
					dx*=-1;
				}
				jog.style.left=px+"px";
				frames=requestAnimationFrame(game);
			}

			window.addEventListener("load",inicia);

		</script>
	</head>
	<body>

		<div id="jogador"></div>
		<button id="btIni">Iniciar</button>
		<button id="btPara">Parar</button>

	</body>
</html> 